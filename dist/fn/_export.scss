// This function is internal, and is intentionaly not documented. Create new
// item in export groups and returns complete data map. Throws an error if item
// with identical $name inside a $group already exists, to prevent duplicates.

@function export($name, $props: false, $group: if(global-variable-exists(export-group), $export-group, $system-default-group), $defaults: $export-defaults) {

  // already exists
  @if(map-has-key($system-export, compute-key($name, $group))) {
    @error err('key-exists', compute-key($name, $group), '(export)');
  }

  // defaults
  $props: map-merge($export-defaults, if($props, $props, ()));

  // add new export
  @return map-merge($system-export, (
    '#{compute-key($name, $group)}': map-merge($props, (
      'name': compute-key($name, $group),
      'selector': call(if(map-key-get($props, unique), 'to-id', 'to-class'), if($group != $system-default-group, compute-key($name, $group), $name)),
      'z-index': if($group != $system-default-group, '#{$group}-#{$name}', $name),
    )),
  ));

}
