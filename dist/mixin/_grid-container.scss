// Private mixins are intentionally left out of documentation.
// Adds grid layout to a container element. Includes legacy support, however the layout may not be identical to a modern W3C standard.
// @access private
// @param {number} $width - Column width, in pixels
// @param {number|string} $whitespace - Space between columns, scale or number in pixels
// @param {number} $reduce-viewport-by [0] - Reduce available width considered into legacy calculation
// @param {number|string} $repeat [$const-grid-column-min] - Repeat value, number for legacy mode

@mixin grid-container($width, $whitespace, $reduce-viewport-by: 0, $repeat: $const-grid-column-min) {

  // calculate real occupied width
  $real-width: $width + whitespace($whitespace, false);

  // W3C standard
  @if(type-of($repeat) != 'number') {
    grid-template-columns: repeat($repeat, minmax($real-width, 1fr));
  }

  // legacy
  // doesn't support W3C standard
  // number of columns must be therefore specified

  @else {

    // take into account minimum number of columns
    $repeat-restricted: $repeat;
    grid-template-columns: repeat($repeat-restricted, minmax($width, 1fr));

    // media
    // recalculates number of columns for each available width
    // media query is based on the item width

    @for $column-index from ($const-grid-column-min + 1) through $const-grid-column-max {
      @include media-up-from($column-index * $real-width, width) {

        // calculate number of columns
        $available: media($column-index * $real-width) - $reduce-viewport-by;
        $add: if($available <= $column-index * $real-width, floor(($available - ($const-grid-column-min * $real-width)) / $real-width) , 0);
        $repeat-restricted: $const-grid-column-min + $add;

        // legacy
        grid-template-columns: repeat($repeat-restricted, minmax($width, 1fr));

      }
    }

  }

}
